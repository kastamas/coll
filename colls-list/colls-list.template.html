<div class="container">
<div class="row">
<div class="col-md-12">

<!-- for test
 <pre>{{$ctrl.filter | json}}</pre>-->

<h2 class="page-header">{{ title}}</h2>


<div ng-show="$ctrl.list.length != '0'">
    <!----------------- filters ------------------->
    <h3 style="text-transform: uppercase;">фильтры</h3>
    <div class="row">
        <div class="col-md-2">
            <label for="selectTextId">по тексту</label><br>
            <select id="selectTextId" data-ng-model="$ctrl.filter.text_id"  ng-options="item.id as item.title for item in $ctrl.textsList | orderBy:'title':false " class="form-control">
                <!-- <option data-ng-repeat="item in $ctrl.textsList" value="{{item.id}}">{{item.title}}</option>-->
                <option value=''>- Все тексты -</option>
            </select>
        </div>
        <div class="col-md-2">
            <label for="selectStatus">по статусу</label><br>
            <select id="selectStatus" data-ng-model="$ctrl.filter.status" class="form-control">
                <option value='any'>- Любой статус -</option>
                <option  value='u' >Не разобрано</option>
                <option  value='d' >Разобрано</option>
                <option  value='a' >Разобрано не до конца</option>
            </select>
        </div>
        <div class="col-md-2">
            <label for="selectStatus">по кол. компонентов</label><br>
            <select id="selectStatus" data-ng-model="$ctrl.filter.characteristic_quantity" class="form-control">
                <option value='any'>- Любое количество -</option>
                <option  value='2xmem' >двучленное</option>
                <option  value='3xmem' >трехчленное</option>
            </select>
        </div>
        <div class="col-md-2">
            <label for="selectStatus">по отношению</label><br>
            <select id="selectStatus" data-ng-model="$ctrl.filter.characteristic_relation_to_main" class="form-control">
                <option  value='any'>- Любое отношение -</option>
                <option  value='prepos'   >препозитивное</option>
                <option  value='postpos'  >интерпозитивное</option>
                <option  value='interpos' >постпозитивное</option>
                <option  value='distant'  >дистантное</option>
            </select>
        </div>

        <div class="col-md-3">
            <span>Всего словосочетаний: {{$ctrl.list.length}}</span>
            <hr class="withoutMargin">
            <span>в выбраном тексте: {{($ctrl.list | filter: collocationsTextFilter).length }}</span><br>
            <span>соответствуют фильтру: {{($ctrl.list | filter: collocationsMainFilter).length }}</span>


        </div>
       <!-- <div class="col-md-2">
            <pre>{{$ctrl.filter | json}}</pre>
        </div>-->
    </div>
</div>
<hr>


</div>
</div>
</div>


<!----------------- table --------------------->
<div class="container">
<div ng-show=" $ctrl.list.length != '0'">
    <div ng-show="($ctrl.list | filter: collocationsTextFilter).length != 0 ">
        <table class="table table-striped table-hover table-custom">
            <thead>
                <tr>
                    <th > </th>
                    <th ng-show="$ctrl.filter.text_id == null">Текст</th>
                    <th class="text-nowrap">Словосочетание</th>
                    <th title="Номер страницы"><a ng-click="$ctrl.sort('page_number')">
                        <div class="text-nowrap"
                        >#Стр.
                        <span ng-show="$ctrl.sorting.rows == 'page_number'" class="glyphicon"  ng-class="{'glyphicon-menu-up' : $ctrl.sorting.reverse, 'glyphicon-menu-down' : !$ctrl.sorting.reverse}" aria-hidden="true"></span>
                        </div></a>
                    </th>
                    <th>Х-ка по количеству компонентов</th>
                    <th>Х-ка по отношению к главному слову</th>
                    <!-- characteristics begin -->
                        <th  class="text-nowrap" style="border-left: 1px solid #ddd;" >Первый атрибут</th>
                        <!--  <th>?</th>-->
                        <th  class="text-nowrap" style="border-left: 1px solid #ddd;">Второй атрибут</th>
                        <!--  <th>?</th>-->
                        <th  class="text-nowrap" style="border-left: 1px solid #ddd;">Разделитель</th>
                    <!-- characteristics end -->
                    <th></th>
                    <th class="text-nowrap"><a ng-click="$ctrl.sort('created_at')"><div class="text-nowrap"
                    >Добавлено
                    <span ng-show="$ctrl.sorting.rows == 'created_at'" class="glyphicon"  ng-class="{'glyphicon-menu-up' : $ctrl.sorting.reverse, 'glyphicon-menu-down' : !$ctrl.sorting.reverse}" aria-hidden="true"></span>
                    </div>
                    </a></th>
                    <th></th><!--del-->
                </tr>
            </thead>
            <tbody>
                <tr data-ng-repeat="item in $ctrl.list | filter: collocationsMainFilter | orderBy:$ctrl.sorting.rows:$ctrl.sorting.reverse">
                    <!--Status todo:removeCrutch -->
                        <td  class="c danger"    title="Не разобрано"          ng-if="item.status == 'u'" ></td>
                        <td  class="c success"  title="Разобрано"             ng-if="item.status == 'd'" ></td>
                        <td  class="c info"     title="Разобрано не до конца" ng-if="item.status == 'a'" ></td>

                    <td title="{{item.collocation}}"
                        ng-show="$ctrl.filter.text_id == null"
                        >{{item.text_name}}</td>
                    <td title="{{item.collocation}}"
                        class="text-nowrap"
                        ><div class="cell-limited-m">{{item.collocation}}</div></td>
                    <td>{{item.page_number}}</td>

                    <!--charact_relation_to_main todo:removeCrutch-->
                        <td class=" "  ng-if="item.characteristic_quantity == '2xmem'"  >двучленное</td>
                        <td class=" "  ng-if="item.characteristic_quantity == '3xmem'"  >трехчленное</td>
                        <td            ng-if="item.characteristic_quantity == NULL"></td>


                    <!--charact_quantity todo:removeCrutch-->
                        <td class=" "  ng-if="item.characteristic_relation_to_main == 'prepos'"   >препозитивное </td>
                        <td class=" "  ng-if="item.characteristic_relation_to_main == 'postpos'"  >постпозитивное</td>
                        <td class=" "  ng-if="item.characteristic_relation_to_main == 'interpos'" >интерпозитивное</td>
                        <td class=" "  ng-if="item.characteristic_relation_to_main == 'distant'"  >дистантное</td>
                        <td            ng-if="item.characteristic_relation_to_main == NULL"></td>


                    <!-- Extra characteristics begin  Order is Changed Due To comfortoble-->
                       <!-- <td>{{item.expansion_1}}</td>-->
                        <td style="border-left: 1px solid #ddd;">{{item.expansion_1}} {{item.characteristic_1_name}} {{item.characteristic_attr1_explicit_name}}</td>

                      <!--  <td>{{item.expansion_2}}</td>-->
                        <td style="border-left: 1px solid #ddd;">{{item.expansion_2}} {{item.characteristic_2_name}} {{item.characteristic_attr2_explicit_name}}</td>


                        <td style="border-left: 1px solid #ddd;">{{item.characteristic_d_name}}</td>
                    <!-- Extra characteristics end -->
                    <td><a href="#/colls/edit/{{item.id}}">ред.</a></td>
                    <td>{{item.created_at | limitTo:'10' | date:'dd/MM/yyyy'}}</td>
                    <td class="red"><a class="red" ng-click="$ctrl.delete(item.id)">удалить</a></td>
                </tr>
            </tbody>
        </table>
</div>

    <div class="text-message" ng-show="($ctrl.list | filter: collocationsTextFilter).length == 0">
        <p>Для этог текста не добавлено ни одного словосочетания.</p>
    </div>
<hr>
<br>
<!----------------- footer --------------------->
</div>
</div>




<!----------------- message if empty ------------------->
<div class="text-message"  ng-show="$ctrl.list.length == '0'">
    <p>Пусто. <a href="#/colls/new">Добавить словосочетание.</a></p>
</div>

